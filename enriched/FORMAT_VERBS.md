#formatSpecifiers #go #golang #programming #printf #fmt #types #formatting #strings #pointers

# Спецификаторы Формата в Go: Детальный Разбор

```table-of-contents
```

Пакет `fmt` в Go предоставляет функции для форматированного ввода-вывода, аналогичные функциям `printf` и `scanf` в C. Центральное место в этом пакете занимают спецификаторы формата (format specifiers), которые определяют, как значения различных типов будут преобразованы в строковое представление. Рассмотрим их подробно, с примерами и объяснениями.

## Общие Спецификаторы

Эти спецификаторы могут использоваться с большинством типов данных.

*   **`%v` (Значение по умолчанию):**  Этот спецификатор отображает значение в его "естественном" формате.  Для простых типов (целые числа, числа с плавающей точкой, строки) это обычно интуитивно понятно. Для составных типов (структуры, массивы, срезы) он выводит значения элементов.

    ```go
    package main

    import "fmt"

    type Person struct {
        Name string
        Age  int
    }

    func main() {
        num := 42
        str := "Hello"
        person := Person{Name: "Alice", Age: 30}

        fmt.Printf("num: %v\n", num)      // Вывод: num: 42
        fmt.Printf("str: %v\n", str)      // Вывод: str: Hello
        fmt.Printf("person: %v\n", person) // Вывод: person: {Alice 30}
    }
    ```

*   **`%+v` (Значение с именами полей):** При использовании со структурами, этот спецификатор добавляет имена полей к выводу. Это значительно улучшает читаемость, особенно для сложных структур.

    ```go
    package main

    import "fmt"

    type Person struct {
        Name string
        Age  int
    }

    func main() {
        person := Person{Name: "Alice", Age: 30}
        fmt.Printf("person: %+v\n", person) // Вывод: person: {Name:Alice Age:30}
    }
    ```

*   **`%#v` (Синтаксис Go):**  Этот спецификатор выводит значение в таком виде, как оно могло бы быть представлено в исходном коде Go. Это полезно для отладки и создания воспроизводимых примеров.

    ```go
    package main

    import "fmt"

    type Person struct {
        Name string
        Age  int
    }

    func main() {
        person := Person{Name: "Alice", Age: 30}
        fmt.Printf("person: %#v\n", person) // Вывод: person: main.Person{Name:"Alice", Age:30}
        arr := []int{1, 2, 3}
        fmt.Printf("arr: %#v\n", arr)    // Вывод: arr: []int{1, 2, 3}
    }
    ```

*   **`%T` (Тип значения):** Этот спецификатор выводит тип переменной. Это крайне полезно для быстрой проверки типов во время разработки.

    ```go
    package main

    import "fmt"
    
    type MyType int

    func main() {
        num := 42
        str := "Hello"
        var myVar MyType = 5

        fmt.Printf("num type: %T\n", num)   // Вывод: num type: int
        fmt.Printf("str type: %T\n", str)   // Вывод: str type: string
        fmt.Printf("myVar type: %T\n", myVar) // Вывод: myVar type: main.MyType
    }
    ```

*   **`%%` (Литерал `%`):**  Поскольку `%` используется для обозначения спецификаторов формата, чтобы вывести сам символ `%`, нужно использовать `%%`.

    ```go
    package main

    import "fmt"

    func main() {
        fmt.Printf("100%%\n") // Вывод: 100%
    }
    ```

## Логические Значения

*   **`%t` (true/false):**  Этот спецификатор предназначен для логических значений (boolean). Он выводит "true" или "false".

    ```go
    package main

    import "fmt"

    func main() {
        isTrue := true
        isFalse := false

        fmt.Printf("isTrue: %t\n", isTrue)   // Вывод: isTrue: true
        fmt.Printf("isFalse: %t\n", isFalse) // Вывод: isFalse: false
    }
    ```

## Целые Числа

Спецификаторы для целых чисел позволяют выводить числа в различных системах счисления.

*   **`%b` (Двоичная система):**  Выводит число в двоичном представлении (основание 2).

    ```go
    package main

    import "fmt"

    func main() {
        num := 42
        fmt.Printf("Binary: %b\n", num) // Вывод: Binary: 101010
    }
    ```

*   **`%c` (Символ Unicode):**  Интерпретирует целое число как код Unicode и выводит соответствующий символ.

    ```go
    package main

    import "fmt"

    func main() {
        code := 65 // Код ASCII для 'A'
        fmt.Printf("Character: %c\n", code) // Вывод: Character: A
    }
    ```

*   **`%d` (Десятичная система):**  Выводит число в десятичном представлении (основание 10). Это наиболее распространенный способ вывода целых чисел.

    ```go
    package main

    import "fmt"

    func main() {
        num := 42
        fmt.Printf("Decimal: %d\n", num) // Вывод: Decimal: 42
    }
    ```

*   **`%o` (Восьмеричная система):**  Выводит число в восьмеричном представлении (основание 8).

    ```go
    package main

    import "fmt"

    func main() {
        num := 42
        fmt.Printf("Octal: %o\n", num) // Вывод: Octal: 52
    }
    ```

*   **`%O` (Восьмеричная система с префиксом 0o):** Выводит число в восьмеричном представлении с префиксом "0o". Это делает вывод более явным и соответствует современному синтаксису Go.

    ```go
    package main
    import "fmt"
    func main(){
        number := 42
        fmt.Printf("Octal with prefix: %O\n", number) //Octal with prefix: 0o52
    }
    ```

*   **`%q` (Символ в одинарных кавычках):** Выводит целое число как код Unicode, заключая символ в одинарные кавычки.  Специальные символы безопасно экранируются.

    ```go
    package main

    import "fmt"

    func main() {
        code := 65 // Код ASCII для 'A'
        fmt.Printf("Quoted character: %q\n", code) // Вывод: Quoted character: 'A'
        newline := 10 // Код ASCII для новой строки
        fmt.Printf("Quoted newline: %q\n", newline) // Вывод: Quoted newline: '\n'
    }
    ```

*   **`%x` (Шестнадцатеричная система, строчные буквы):**  Выводит число в шестнадцатеричном представлении (основание 16), используя строчные буквы (a-f) для цифр больше 9.

    ```go
    package main

    import "fmt"

    func main() {
        num := 42
        fmt.Printf("Hexadecimal (lowercase): %x\n", num) // Вывод: Hexadecimal (lowercase): 2a
    }
    ```

*   **`%X` (Шестнадцатеричная система, прописные буквы):**  Выводит число в шестнадцатеричном представлении, используя прописные буквы (A-F) для цифр больше 9.

    ```go
    package main

    import "fmt"

    func main() {
        num := 42
        fmt.Printf("Hexadecimal (uppercase): %X\n", num) // Вывод: Hexadecimal (uppercase): 2A
    }
    ```

*   **`%U` (Формат Unicode):** Выводит число как код Unicode в формате "U+XXXX", где XXXX - шестнадцатеричное представление кода.

    ```go
    package main

    import "fmt"

    func main() {
        code := 65 // Код ASCII для 'A'
        fmt.Printf("Unicode format: %U\n", code) // Вывод: Unicode format: U+0041
    }
    ```

## Строки и Срезы Байтов

Эти спецификаторы обрабатывают строки и срезы байтов (`[]byte`) эквивалентным образом.

*   **`%s` (Неинтерпретированные байты):**  Выводит строку или срез байтов как есть, без какой-либо интерпретации.

    ```go
    package main

    import "fmt"

    func main() {
        str := "Hello, world!"
        bytes := []byte{72, 101, 108, 108, 111} // "Hello" в ASCII

        fmt.Printf("String: %s\n", str)      // Вывод: String: Hello, world!
        fmt.Printf("Bytes: %s\n", bytes)     // Вывод: Bytes: Hello
    }
    ```

*   **`%q` (Строка в двойных кавычках):**  Выводит строку, заключая её в двойные кавычки.  Специальные символы безопасно экранируются.

    ```go
    package main

    import "fmt"

    func main() {
        str := "Hello, \"world\"!"
        fmt.Printf("Quoted string: %q\n", str) // Вывод: Quoted string: "Hello, \"world\"!"
    }
    ```

*   **`%x` (Шестнадцатеричное представление, строчные буквы):**  Выводит каждый байт строки или среза байтов как два шестнадцатеричных символа (строчные буквы).

    ```go
    package main

    import "fmt"

    func main() {
        str := "Hello"
        fmt.Printf("Hex (lowercase): %x\n", str) // Вывод: Hex (lowercase): 48656c6c6f
    }
    ```

*   **`%X` (Шестнадцатеричное представление, прописные буквы):**  Выводит каждый байт строки или среза байтов как два шестнадцатеричных символа (прописные буквы).

    ```go
    package main

    import "fmt"

    func main() {
        str := "Hello"
        fmt.Printf("Hex (uppercase): %X\n", str) // Вывод: Hex (uppercase): 48656C6C6F
    }
    ```

## Указатели

*   **`%p` (Шестнадцатеричный адрес с префиксом 0x):**  Выводит значение указателя (адрес в памяти) в шестнадцатеричном формате с префиксом "0x".

    ```go
    package main

    import "fmt"

    func main() {
        num := 42
        ptr := &num

        fmt.Printf("Pointer: %p\n", ptr) // Вывод: Pointer: 0xc000014098 (значение может отличаться)
    }
    ```
## Заключение

Спецификаторы формата в Go предоставляют мощный и гибкий механизм для управления выводом данных. Понимание их работы и правильное использование позволяют создавать читаемый, информативный и отладочный вывод.  Хотя приведенный выше обзор охватывает наиболее распространенные спецификаторы, важно помнить, что полный список и более детальное описание доступны в официальной документации Go: [https://pkg.go.dev/fmt](https://pkg.go.dev/fmt).

```old
Вот некоторые спецификаторы формата, которые можно использовать с `fmt.Printf()` в Go:

- Общие:

  - `%v` - значение в формате по умолчанию
  - `%+v` - при печати структур добавляет имена полей
  - `%#v` - представление значения в синтаксисе Go
  - `%T` - представление типа значения в синтаксисе Go
  - `%%` - буквальный знак процента; не использует значение

- Логические:

  - `%t` - слово true или false

- Целые числа:

  - `%b` - в двоичной системе
  - `%c` - символ, представленный соответствующим кодом Unicode
  - `%d` - в десятичной системе
  - `%o` - в восьмеричной системе
  - `%O` - в восьмеричной системе с префиксом 0o
  - `%q` - одинарно кавычками заключенный символ, безопасно экранированный синтаксисом Go
  - `%x` - в шестнадцатеричной системе, с маленькими буквами для a-f
  - `%X` - в шестнадцатеричной системе, с большими буквами для A-F
  - `%U` - формат Unicode: U+1234; то же самое, что "U+%04X"

- Строки и срезы байтов (равнозначно обрабатываются с этими глаголами):

  - `%s` - неинтерпретированные байты строки или среза
  - `%q` - строка в двойных кавычках, безопасно экранированная синтаксисом Go
  - `%x` - в шестнадцатеричной системе, нижний регистр, два символа на байт
  - `%X` - в шестнадцатеричной системе, верхний регистр, два символа на байт

- Указатели:
  - `%p` - в шестнадцатеричной системе, с ведущим 0x¹².

Обратите внимание, что это не полный список спецификаторов формата. Полный список можно найти в [документации Go](https://pkg.go.dev/fmt).

```